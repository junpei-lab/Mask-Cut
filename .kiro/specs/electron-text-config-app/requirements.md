# Requirements Document

## Introduction
Mask-Cut の Electron クライアントは、単一画面でテキストを入力しマスキングを実行できること、そして設定画面で接続先エンドポイントや利用モデルを切り替えられることを目的とする。本ドキュメントはメイン画面と設定画面に求められる振る舞いを、プラットフォーム共通のマスキング体験に沿って定義する。

## Requirements

### Requirement 1: メイン画面のテキスト入力と送信制御
**Objective:** マスキングオペレータとして、単一ビューでテキストを入力し安全にマスキングを指示できるようにしたい、そうすれば前処理時間を短縮できる。

#### Acceptance Criteria
1. When ユーザーがテキスト入力欄に内容を貼り付けてマスク実行を開始したとき, the Electronアプリ shall 現在の入力全体を単一のマスキングリクエストとして送信する。
2. If テキスト入力欄が空の状態で送信操作が行われた場合, then the Electronアプリ shall 送信を阻止して「入力が必要です」というエラー通知を入力欄直下に表示する。
3. While マスキング処理が進行中で結果が未確定の間, the Electronアプリ shall 入力欄と送信トリガーを無効化し進行ステータスを表示する。
4. When ユーザーが入力欄に 2 回以上連続で送信可能なテキストを投入した場合, the Electronアプリ shall 各リクエストを順番に処理し前の処理が完了するまで新規処理を待機させる。
5. The Electronアプリ shall 送信前に入力内容をローカルで保持し、処理失敗時に同じテキストを再入力せず再送信できるようにする。

### Requirement 2: マスキング結果と状態表示
**Objective:** ユーザーとして、実行結果とその信頼性を即座に確認したい、そうすればマスキング後のテキストを安全に活用できる。

#### Acceptance Criteria
1. When マスキング処理が成功したとき, the Electronアプリ shall 結果表示エリアへマスク済みテキスト全体を表示し、元テキストとの対応が保たれていることを示す。
2. When マスキング処理が完了したとき, the Electronアプリ shall 実行に使用したモデル名とエンドポイント識別子を結果エリア近傍に表示する。
3. If マスキング処理が失敗またはタイムアウトした場合, then the Electronアプリ shall 失敗理由を含むエラーバナーを表示し、再試行ボタンを有効にする。
4. While 結果表示エリアにコンテンツが存在する間, the Electronアプリ shall クリップボードへコピーする操作を提供する。
5. Where エラーバナーが表示されている, the Electronアプリ shall エンドポイントとモデル設定画面へのショートリンクを提示してユーザーが設定を見直せるようにする。

### Requirement 3: 設定画面での接続先とモデル管理
**Objective:** ワークスペース管理者として、エンドポイントやモデルを切り替えて最適なマスキング品質とコストを両立させたい、そうすればチーム要件に合わせた運用ができる。

#### Acceptance Criteria
1. The Electronアプリ shall 設定画面でエンドポイント URL, API キー参照識別子, 利用モデル名を編集可能なフィールドとして提供する。
2. When ユーザーが設定を保存したとき, the Electronアプリ shall 入力値の必須項目を検証し不備がある場合は保存を拒否する。
3. When 設定保存が成功したとき, the Electronアプリ shall 新しい設定をメイン画面へ即時反映し後続のマスキングリクエストで使用する。
4. If エンドポイント接続テストが失敗した場合, then the Electronアプリ shall 保存済みの前回有効設定へロールバックし失敗理由を表示する。
5. While 設定画面が開いている間, the Electronアプリ shall 現在有効なモデル名と最終更新日時を表示する。
