# Mask-Cut Electron

Mask-Cut Electron は、LLM へ渡す前にテキストを安全にマスキングするためのデスクトップクライアントです。ドラッグ&ペーストで文章を投入し、結果をワンクリックでコピーできるシンプルなワークフローを提供します。

## 主な特徴
- **ワンクリック実行**: テキストエリアに貼り付けて「マスク実行」を押すだけで LLM マスキングを実行。
- **1000 文字ガード**: 入力は 1000 文字までに制限され、カウンターで上限を確認可能。
- **接続プロファイル**: 設定画面から OpenAI 互換エンドポイント、モデル、API キーを GUI で保存。
- **結果ビュー**: マスク済みテキストとモデル/エンドポイントを同じ画面で確認し、そのままコピー。
- **ステータス / エラー表示**: 実行中・完了・失敗がバナーでわかり、設定画面への導線も用意。

## 動作要件
- Node.js 18 以降
- pnpm 8 以降
- Windows / macOS / Linux（Electron 28 系）
- OpenAI 互換の API（OpenAI, Azure OpenAI, llama.cpp, Ollama など）

## セットアップ手順
1. リポジトリ直下で `pnpm install`
2. Electron アプリをビルド: `pnpm --filter @mask-cut/electron-app build`
3. 開発起動: `pnpm --filter @mask-cut/electron-app dev`
   - ビルド済みのまま起動したい場合は `pnpm --filter @mask-cut/electron-app start`
4. 初回起動で「設定を開く」をクリックし、エンドポイント・モデル・API キーを登録

## 使い方（ユーザーフロー）
1. 画面上部で接続先が表示されているか確認（未設定の場合は設定画面に移動）
2. 「入力テキスト」にマスキング対象をペースト（1000 文字を超える部分は自動で切り捨て）
3. 「マスク実行」を押すとバナーに進捗が表示され、完了すると結果パネルが開く
4. 「結果をコピー」でマスク済みテキストをクリップボードへ送る
5. ステータスバナーが赤くなった場合はエラー内容とコードを確認し、必要であれば「設定を開く」から接続情報を見直す

## 設定画面で変更できる項目
- エンドポイント URL（例: `https://api.openai.com/v1`、`http://localhost:1234/v1`）
- モデル名（例: `gpt-4o-mini`, `llama3`）
- API キー（OS の資格情報ストアに安全に保存）
- タイムアウトなどの詳細パラメータ（将来拡張）

設定変更は即座にメイン画面へ反映され、「接続先: host / model」ラベルで確認できます。

## 開発者向けヒント
- UI は `apps/electron-app/src/renderer`、メインプロセスは `src/main`、preload は `src/preload` に分離
- アイコンはルートの `assets/icon.png` を参照（ビルド時に `dist/assets` へコピー）
- テストは `pnpm --filter @mask-cut/electron-app test` でまとめて実行（main / preload / renderer）

## よくある質問
| 質問 | 対応 |
| --- | --- |
| 1000 文字以上を扱いたい | 現時点では入力 UI が 1000 文字に固定。CLI 版または複数回に分けて実行してください。 |
| 画面が真っ白になる | `pnpm --filter @mask-cut/electron-app build` の後に `electron .` を実行しているか、設定ファイルが壊れていないか確認。 |
| API キーを保存したくない | 設定画面で空にすると毎回手入力になります。CLI 版との併用も検討してください。 |

問題が解決しない場合は、実行ログ（開発者ツールのコンソール）や設定内容を記録したうえで issue を起票してください。
